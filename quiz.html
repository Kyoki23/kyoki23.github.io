<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz <3</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Lora:ital@0;1&family=Parisienne&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --color-fondo-gradiente-1: #d4a6ff;
            --color-fondo-gradiente-2: #fc8eeb;
            --color-carta: #fdfbfb;
            --color-sello: #cf425c;
            --color-sello-especial: #8B1538;
            --color-sombra-fuerte: rgba(0, 0, 0, 0.25);
            --color-sombra-suave: rgba(0, 0, 0, 0.1);
            --color-texto: #3a3a3a;
            --color-exito: #4caf50;
            --color-error: #e74c3c;
            --color-easter: #ff9800;
            --fuente-titulo: 'Great Vibes', cursive;
            --fuente-fecha: 'Lora', serif;
            --fuente-carta: 'Parisienne', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--color-fondo-gradiente-1) 0%, var(--color-fondo-gradiente-2) 100%);
            font-family: var(--fuente-fecha);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: linear-gradient(135deg, #f4f1e8 0%, #f0ead6 25%, #ede4c8 50%, #e8ddb5 75%, #e3d6a7 100%);
            background-image:
                radial-gradient(circle at 20% 30%, rgba(139, 69, 19, 0.03) 2px, transparent 2px),
                radial-gradient(circle at 80% 70%, rgba(160, 82, 45, 0.04) 3px, transparent 3px),
                radial-gradient(circle at 40% 80%, rgba(139, 69, 19, 0.02) 1px, transparent 1px);
            border-radius: 20px;
            background-color: rgba(255, 255, 255);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow:
                inset 3px 3px 8px rgba(101, 67, 33, 0.15),
                inset -3px -3px 8px rgba(101, 67, 33, 0.15),
                0 8px 30px var(--color-sombra-fuerte);
            clip-path: polygon(1% 0%, 99% 2%, 98% 15%, 100% 60%, 95% 45%,
                    100% 60%, 98% 75%, 99% 90%, 94% 100%,
                    75% 98%, 60% 100%, 50% 97%, 40% 99%,
                    25% 96%, 6% 98%, 0% 85%, 2% 70%,
                    0% 55%, 3% 40%, 0% 25%, 1% 10%);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-family: var(--fuente-titulo);
            font-size: 3rem;
            color: var(--color-sello);
            text-shadow: 3px 3px 10px var(--color-sombra-fuerte);
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-sello), var(--color-sello-especial));
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .question-counter {
            font-family: var(--fuente-fecha);
            font-size: 1.1rem;
            color: var(--color-texto);
            text-align: center;
            margin-bottom: 25px;
            font-weight: bold;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px var(--color-sombra-suave);
        }

        .question-text {
            font-family: var(--fuente-carta);
            font-size: 2rem;
            color: var(--color-texto);
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.4;
        }

        .input-container {
            margin-bottom: 20px;
        }

        .answer-input {
            width: 100%;
            padding: 15px 20px;
            font-family: var(--fuente-fecha);
            font-size: 1.1rem;
            border: 3px solid var(--color-sello);
            border-radius: 10px;
            background: white;
            color: var(--color-texto);
            transition: all 0.3s ease;
            outline: none;
        }

        .answer-input:focus {
            border-color: var(--color-sello-especial);
            box-shadow: 0 0 15px rgba(207, 66, 92, 0.3);
            transform: scale(1.02);
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            font-family: var(--fuente-fecha);
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            background: linear-gradient(135deg, var(--color-sello), var(--color-sello-especial));
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px var(--color-sombra-suave);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--color-sombra-fuerte);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-family: var(--fuente-fecha);
            font-size: 1.1rem;
            text-align: center;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback.success {
            background: rgba(76, 175, 80, 0.2);
            color: var(--color-exito);
            border: 2px solid var(--color-exito);
        }

        .feedback.error {
            background: rgba(231, 76, 60, 0.2);
            color: var(--color-error);
            border: 2px solid var(--color-error);
        }

        .feedback.easter {
            background: rgba(255, 152, 0, 0.2);
            color: var(--color-easter);
            border: 2px solid var(--color-easter);
        }

        .help-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-sello), var(--color-sello-especial));
            border: none;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 20px var(--color-sombra-fuerte);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .help-button:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 25px var(--color-sombra-fuerte);
        }

        .help-counter {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--color-sello-especial);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-family: var(--fuente-fecha);
            font-weight: bold;
            box-shadow: 0 2px 8px var(--color-sombra-fuerte);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: linear-gradient(135deg, #f4f1e8 0%, #e8ddb5 100%);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px var(--color-sombra-fuerte);
            text-align: center;
            animation: modalAppear 0.3s ease;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal h2 {
            font-family: var(--fuente-titulo);
            font-size: 2.5rem;
            color: var(--color-sello);
            margin-bottom: 20px;
        }

        .modal p {
            font-family: var(--fuente-fecha);
            font-size: 1.1rem;
            color: var(--color-texto);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            font-family: var(--fuente-fecha);
            font-size: 1.1rem;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.confirm {
            background: linear-gradient(135deg, var(--color-sello), var(--color-sello-especial));
            color: white;
        }

        .modal-btn.cancel {
            background: rgba(0, 0, 0, 0.1);
            color: var(--color-texto);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px var(--color-sombra-suave);
        }

        .hint-text {
            font-family: var(--fuente-carta);
            font-size: 1.8rem;
            color: var(--color-sello-especial);
            margin-top: 10px;
            display: none;
        }

        .hint-text.show {
            display: block;
        }

        .completion-screen {
            display: none;
            text-align: center;
        }

        .completion-screen.active {
            display: block;
        }

        .completion-screen h2 {
            font-family: var(--fuente-titulo);
            font-size: 3.5rem;
            color: var(--color-sello);
            margin-bottom: 20px;
        }

        .completion-screen p {
            font-family: var(--fuente-fecha);
            font-size: 1.3rem;
            color: var(--color-texto);
            margin-bottom: 15px;
        }

        .score-card {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 4px 15px var(--color-sombra-suave);
        }

        .score-item {
            font-family: var(--fuente-carta);
            font-size: 1.8rem;
            color: var(--color-sello-especial);
            margin: 10px 0;
        }

        .welcome-screen {
            display: block;
            text-align: center;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .welcome-screen h2 {
            font-family: var(--fuente-titulo);
            font-size: 3rem;
            color: var(--color-sello);
            margin-bottom: 25px;
            text-shadow: 2px 2px 8px var(--color-sombra-suave);
        }

        .welcome-screen p {
            font-family: var(--fuente-fecha);
            font-size: 1.2rem;
            color: var(--color-texto);
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
        }

        .welcome-card {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 15px var(--color-sombra-suave);
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .question-text {
                font-size: 1.5rem;
            }

            .help-button {
                width: 50px;
                height: 50px;
                font-size: 1.5rem;
                bottom: 20px;
                right: 20px;
            }

            .modal {
                padding: 20px;
            }

            .modal h2 {
                font-size: 2rem;
            }

            .welcome-screen h2 {
                font-size: 2rem;
            }

            .welcome-screen p {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container" id="content">
        <div class="header">
            <h1>¿Cuánto sabes sobre Alex?</h1>
        </div>

        <div class="welcome-screen" id="welcomeScreen">
            <div class="welcome-card">
                <h2>¡Bien hecho!</h2>
                <p>
                    ¡Hola Lily!, me alegra que hayas llegado aquí. ¿Tardaste mucho en ver esas pistas? Espero que no,
                    desde el inicio me dijiste que tiempo no tenías asi que espero no hayas tardado mucho.
                    Por el mismo motivo que no tenías tiempo, he decidido que el regalo de este día no involucraría mi
                    presencia, de ese modo podrás tardarte lo que desees, sin preocuparte por mí o por el tiempo ^^.
                </p>
                <p>
                    Este cuestionario ha sido diseñado especialmente para ti, o mas bien, 
                    diseñado para probarte a ti misma acerca de que tanto me conoces a mi.
                    En este quiz vas a tener que demostrar tu conocimiento respondiendo una serie de preguntas.
                    ¿Conocimiento de qué? ¡Pues de mí, claro está! owo.
                </p>
                <p>
                    Siempre he pensado que yo te conozco bastante bien, pero ahora es tu turno de demostrar que tanto
                    sabes sobre mí.
                    Suelo ser bastante reservado, así que algunas preguntas pueden ser un poco difíciles de contestar,
                    no te entristezcas si no lo sabes ^^.
                </p>
                <p>
                    Decidí no ser tan maloso y darte algunas pistas si lo necesitas, para ayudarte en el camino y eso
                    :3. Asi que si necesitas ayuda
                    da clic en el botón de interrogación en la esquina inferior derecha, pero ten en cuenta que esto
                    afectará tu puntuación final.
                    ¡Mientras menos ayudas necesites, mejor será tu resultado! ¿Y quién sabe? Tal vez haya una sorpresa
                    si consigues un buen puntaje ;)
                </p>
                <p style="font-weight: bold; font-size: 1.3rem; margin-top: 25px;">
                    ¿Todo listo, señorita?
                </p>
                <button class="submit-btn" id="startBtn">¡Listo!</button>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="question-counter" id="questionCounter"></div>

        <div id="quizContainer" style="display: none;">
            <div class="question-card">
                <div class="question-text" id="questionText"></div>
                <div class="input-container">
                    <input type="text" class="answer-input" id="answerInput"
                        placeholder="Escribe tu respuesta aquí <3 ">
                </div>
                <button class="submit-btn" id="submitBtn">Enviar Respuesta</button>
                <div class="feedback" id="feedback"></div>
            </div>
        </div>

        <div class="completion-screen" id="completionScreen">
            <h2>¡Felicidades!</h2>
            <p>Has completado el cuestionario</p>
            <div class="score-card">
                <div class="score-item">Preguntas respondidas: <span id="totalQuestions"></span></div>
                <div class="score-item">Ayudas solicitadas: <span id="totalHelps"></span></div>
                <div class="score-item" id="performanceText"></div>
            </div>
        </div>
    </div>

    <button class="help-button" id="helpButton" style="display: none;">
        ?
        <span class="help-counter" id="helpCounter">0</span>
    </button>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h2>Solicitar Ayuda</h2>
            <p id="modalQuestion">¿Quieres una ayuda? Tu contador de ayudas subirá en 1, mientras menos ayudas pidas,
                mejor resultado tendrás</p>
            <p class="hint-text" id="hintText"></p>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="cancelBtn">Cancelar</button>
                <button class="modal-btn confirm" id="confirmBtn">Aceptar</button>
            </div>
        </div>
    </div>

    <div class="modal-already" id="modalAlready" style="display: none;">
        <div class="modal">
            <h2>Usted ya tomó este test, señorita ^^</h2>
            <p id="modalQuestion">Ya tomaste el quiz Lily, ¿Querías alterar tus respuestas? Malosa :3</p><br>
            <p>Usaste <span id="helpCountDisplay"></span> ayudas</p>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "¿Cuál es mi segundo apellido?",
                correctAnswer: "sotelo",
                hint: "¿Pregunta 1 y ya pidiendo ayuda? :p... empieza con S",
                correct: "Empezamos fácil, ¿no? :3",
                easterEggs: [
                    { answer: "vazquez", message: "Ese es mi primer apellido >:3" },
                    { answer: "vega", message: "Sería un lindo apellido para mis hijos, ¿no crees?" },
                    { answer: "santander", message: "Lindo apellido, pero no :3" },
                ]
            },
            {
                question: "¿Cuál es mi anime favorito?",
                correctAnswer: "codegeass",
                hint: "Siempre te he dicho que quiero que lo veamos juntos, mando mensajes en mis estados tambien",
                correct: "¿Si lo vamos a ver juntos o nadota?",
                easterEggs: [
                    { answer: "danganronpa", message: "No lo terminamos de ver al final, ¿no? Incorrecto de todos modos"},
                    { answer: "shingeki", message: "Ew, no" },
                    { answer: "shingekinokyogin", message: "Ew, no"},
                    { answer: "hunterxhunter", message: "Me encanta, pero no es el favorito" }
                ]
            },
            {
                question: "¿Cuál es el nombre de mi gata vaquita?",
                correctAnswer: "lola",
                hint: "Empieza con L y es un nombre de 4 letras",
                correct: "La vaca Lola, la vaca Lola, tiene cabeza y tiene cola owo",
                easterEggs: [
                    { answer: "nikki", message: "Esa es la marrón ^^'" },
                    { answer: "bolillo", message: "¿Bolillo ajolote o bolillo dragón? Está mal de todos modos u.u" },
                    { answer: "apolo", message: "Que lindo Apolito <3... pero no ^^" },
                    { answer: "apolito", message: "Que lindo Apolito <3... pero no ^^" }
                ]
            },
            {
                question: "Quitando el grado (Licenciatura), ¿Cuál es el nombre COMPLETO de mi carrera? (Empieza con Ingenieria en <...>)",
                correctAnswer: "ingenieriaendesarrolloygestiondesoftware",
                hint: "La abreviación sería IDGS, si lo quieres abreviar menos... Ing. en D. y G. de S.",
                correct: "Imaginate casarte con un ingeniero... yo lanzo la ficha, just think about it ^^",
                easterEggs: [
                    { answer: "software", message: "Empieza con 'Ingeniería' >:3" },
                    { answer: "ingenieriaensoftware", message: "Casi, pero te falta algo mas" },
                    { answer: "ingenieriaenprogramacion", message: "¿Solo eso te acuerdas? Auch, ni siquiera te acercas al nombre :/"},
                    { answer: "programacion", message: "Solo eso te acuerdas? Auch"},
                    { answer: "sistemas", message: "No, ¿tan poco recuerdas de mi? Me mega odias :c" },
                    { answer: "ingenieriaensistemas", message: "No, ¿tan poco recuerdas de mi? Me mega odias :c" },
                    { answer: "ingenieriaentecnologiasdelainformacioneinnovaciondigital", message: "Checaste la página de mi uni? Tramposa >:3, cambió el plan de estudios, no es ese :b" },
                ]
            },
            {
                question: "¿En qué municipio vivo?",
                correctAnswer: "jiutepec",
                hint: "Según me comentaste, a tu padre le gustaba ir a su zócalo",
                correct: "Hace calor, buuh",
                easterEggs: [
                    { answer: "cuernavaca", message: "Un poco mas al lado >:3"},
                    { answer: "morelos", message: "Ese es el estado xd"},
                    { answer: "xochitepec", message: "Soy el mas duro de Xochitepec, pero no soy de ahi xd" },
                    { answer: "yautepec", message: "Nopi, ¿Al final fuiste a ver tu obra expuesta?" },
                ]
            },
            {
                question: "¿Cual es mi saga de videojuegos favorita?",
                correctAnswer: "gearsofwar",
                hint: "Esta pregunta ya te la había hecho antes, y respondiste mal, bleeh :b",
                correct: "Esta saga me acompañó desde los 10 años",
                easterEggs: [
                    { answer: "persona", message: "Me encanta, pero no es mi favorita al 100 owo"},
                    { answer: "minecraft", message: "No es saga owo" },
                    { answer: "hollowknight", message: "Nopi, y ya no me has compartido tu aventura, me requete odias u.u" },
                ]
            },
            {
                question: "¿Cual es mi color favorito?",
                correctAnswer: "morado",
                hint: "El mismo que Vegetta777",
                correct: "Me encanta el morado owo",
                easterEggs: [
                    { answer: "negro", message: "La vez que comentamos esto la pregunta era ¿Prefiero el negro o el blanco? No mi favorito general ^^"},
                    { answer: "blanco", message: "Combina con todo owo, no" },
                    { answer: "rosa", message: "No ^^, ¿Te gusta mucho, eh? "},
                ]
            },
            {
                question: "¿Cuántos años tengo?",
                correctAnswer: "21",
                hint: "¿Necesitas pista en serio? Soy unos cuantos meses mas grande que tu u.u",
                correct: "Una diferencia de edad que me parece linda ^^",
                easterEggs: [
                    { answer: "20", message: "¿Te quedaste en el pasado? Eso fue al poco de conocernos :b"},
                    { answer: "22", message: "¿Tan viejo me veo? Chale" },
                    { answer: "19", message: "No... ¿Te gustan menores, eh? ^^' " },
                ]
            },
            {
                question: "¿Quién es mi youtuber favorito?",
                correctAnswer: "elrichmc",
                hint: "¿cómo no vas a saberlo si es del único youtuber que sabes que veo contenido? Vimos videos de él juntos",
                correct: "Eyeyeyey, aaquiii el Rich owo, nunca quisiste continuar viendolo conmigo :c",
                easterEggs: [
                    { answer: "vegetta777", message: "Ya no suelo verlo :c"},
                    { answer: "willyrex", message: "Nunca me encantó en realidad, pero me ví todas sus series jsjs"},
                    { answer: "rich", message: "Correcto, pero pon el nombre completo o está mal >:3" },
                ]
            },
            {
                question: "¿Cuál es mi fruta favorita? (en singular)",
                correctAnswer: "uva",
                hint: "Haciamos bromas de que nuestros nenes iban a ser de gustos caros por nuestras frutas favoritas, por la fresa y la...?",
                correct: "Están muy ñam",
                easterEggs: [
                    { answer: "fresa", message: "Te gustan mucho las fresas, ¿no? Me agradan a mi también ^^"},
                    { answer: "manzana" , message: "No es manzana :b"},
                    { answer: "mango", message: "El mango es rico, pero no es mi favorito"},
                    { answer: "naranja", message: "¿Cómo que naranja? >:3" }
                ]
            },
            {
                question: "¿Cuál es mi animal favorito?",
                correctAnswer: "zorroartico",
                hint: "Tu animal favorito pertenecía al mismo grupo animal que este",
                correct: "Es que son todos bonitos jsjsj <3",
                easterEggs: [
                    { answer: "zorropolar", message: "Si... pero no es el nombre correcto :b"},
                    { answer: "zorroalbino" , message: "El albinismo es una condición genética, asi que no, ¡pero casi!"},
                    { answer: "fenec", message: "Ese era el tuyo, pero no vas mal encaminada"},
                    { answer: "feneco", message: "Ese era el tuyo, pero no vas mal encaminada"},
                    { answer: "zorrodeldesierto", message: "Ese era el tuyo, pero no vas mal encaminada"},
                    { answer: "gato", message: "No es mi favorito, pero me encantan"},
                    { answer: "perro", message: "No soy mucho de perros de hecho"},
                    { answer: "iguana", message: "Lindo Apolito, pero no :3" },
                    { answer: "dragonbarbudo", message: "Larga vida a Bolillo, pero no es mi animal favorito owo" },
                    { answer: "barbudo", message: "Larga vida a Bolillo, pero no es mi animal favorito owo" },
                    { answer: "gecko", message: "Ese era mi reptíl favorito, no mi animal favorito, pero te acordaste, que lindo <3" },
                ]
            },
            {
                question: "¿Cuál es canción favorita de José José?",
                correctAnswer: "sere",
                hint: "La tuve por mucho tiempo en mi perfil de ig, además siempre que puedo la menciono",
                correct: "Soy ese, quien todo lo dió por triunfar, dejando su vida al pasar hecha pedazos",
                easterEggs: [
                    { answer: "eltriste", message: "Soy ese, pero no es la canción correcta :b"},
                    { answer: "volcan" , message: "Soy ese, un volcan apagado, pero no :3"},
                    { answer: "lanavedelolvido", message: "Yo contigo, no es mi favorita sin embargo :b"},
                    { answer: "simedejasahora", message: "Yo contigo, no es mi favorita sin embargo :b"},
                    { answer: "mivida", message: "Yoooooo, pero no >:3"},
                    { answer: "almohada", message: "Yo cuando pienso en ti, pero no es la correcta, bleeh :b"},
                    { answer: "quieroperdermecontigo", message: "Yo contigo, pero no es la favorita :b"},
                    { answer: "voyallenartetoda", message: "El Lunes 28 de José José, pero no es" },
                    { answer: "payaso", message: "Y es verdad soy un payaso, pero no owo" },
                    { answer: "preso", message: "De la carcel de tus besos, no es ^^" },
                ]
            },
            {
                question: "¿Cuál es canción favorita de Persona 5?",
                correctAnswer: "nomorewhatifs",
                hint: "Una mezcla de jazz y pop, la voz de Lyn, una increible combinación... en español el nombre sería ' No más y si's ' ^^",
                correct: "Es una canción muy especial para mi, me encanta",
                easterEggs: [
                    { answer: "lifewillchange", message: "Esta es especial owo, pero no"},
                    { answer: "lastsurprise" , message: "La canción mas conocida diría yo, pero no owo"},
                    { answer: "riversinthedesert", message: "Es la canción del boss final owo, nopi"},
                ]
            },
        ];

        let currentQuestionIndex = 0;
        let helpCount = 0;
        let hintShown = false;
        let quizStarted = false;

        const questionText = document.getElementById('questionText');
        const answerInput = document.getElementById('answerInput');
        const submitBtn = document.getElementById('submitBtn');
        const feedback = document.getElementById('feedback');
        const questionCounter = document.getElementById('questionCounter');
        const progressFill = document.getElementById('progressFill');
        const helpButton = document.getElementById('helpButton');
        const helpCounter = document.getElementById('helpCounter');
        const modalOverlay = document.getElementById('modalOverlay');
        const hintText = document.getElementById('hintText');
        const confirmBtn = document.getElementById('confirmBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const quizContainer = document.getElementById('quizContainer');
        const completionScreen = document.getElementById('completionScreen');
        const welcomeScreen = document.getElementById('welcomeScreen');
        const startBtn = document.getElementById('startBtn');
        const modalQuestion = document.getElementById('modalQuestion');
        const modalAlready = document.getElementById('modalAlready');
        const content = document.getElementById('content');
        const helpCountDisplay = document.getElementById('helpCountDisplay');
        helpCountDisplay.textContent = localStorage.getItem("helpCount") || "0";
        function normalizeText(text) {
            return text
                .toLowerCase()
                .normalize("NFD")
                .replace(/[\u0300-\u036f]/g, "")
                .replace(/\s+/g, "")
                .trim();
        }

        function validateInput(input) {
            return input.replace(/[^a-zA-Z0-9\s]/g, '');
        }

        function displayQuestion() {
            const question = questions[currentQuestionIndex];
            questionText.textContent = question.question;
            answerInput.value = '';
            feedback.classList.remove('show', 'success', 'error', 'easter');
            hintShown = false;
            modalQuestion.style.display = 'block';
            hintText.classList.remove('show');

            questionCounter.textContent = `Pregunta ${currentQuestionIndex + 1} de ${questions.length}`;

            const progress = ((currentQuestionIndex) / questions.length) * 100;
            progressFill.style.width = progress + '%';

            answerInput.focus();
        }

        function checkAnswer() {
            const question = questions[currentQuestionIndex];
            const userAnswer = normalizeText(answerInput.value);
            const correctAnswer = normalizeText(question.correctAnswer);

            if (userAnswer === correctAnswer) {
                showFeedback(question.correct, 'success');
                setTimeout(() => {
                    currentQuestionIndex++;
                    if (currentQuestionIndex < questions.length) {
                        displayQuestion();
                    } else {
                        showCompletionScreen();
                    }
                }, 1500);
                return;
            }

            let foundEasterEgg = false;
            for (let easterEgg of question.easterEggs) {
                if (userAnswer === normalizeText(easterEgg.answer)) {
                    showFeedback(easterEgg.message, 'easter');
                    foundEasterEgg = true;
                    break;
                }
            }

            if (!foundEasterEgg) {
                showFeedback('No owo. ¿Me odia? :c', 'error');
            }
        }

        function showFeedback(message, type) {
            feedback.textContent = message;
            feedback.className = 'feedback show ' + type;
        }

        function showCompletionScreen() {
            localStorage.setItem("quizTaken", "yes");
            localStorage.setItem("helpCount", helpCount);
            quizContainer.style.display = 'none';
            completionScreen.classList.add('active');
            progressFill.style.width = '100%';
            helpButton.style.display = 'none';

            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('totalHelps').textContent = helpCount;
            //pregs=13
            let performance = '';
            if (helpCount === 0) {
                performance = 'Lo hiciste muy bien Lily, me hace felíz que me conozcas tanto <3';
            } else if (helpCount <= 2) {
                performance = 'Ahora me conoces mas, lo hiciste muy bien de todos modos ^^';
            } else if (helpCount <= 4) {
                performance = 'Pedir ayuda no es malo, hiciste un buen trabajo, pero podrías haberlo hecho mejor';
            } else if (helpCount <= 6) {
                performance = 'Ayuda en la mitad de las preguntas, hiciste lo que pudiste, y eso está bien ^^';
            } else if (helpCount <= 8) {
                performance = 'Ayudas en poco mas de la mitad de las preguntas, creo que al menos me conoces un poco, bien hecho ^^';
            } else if (helpCount <= 10) {
                performance = 'Waos, muchas ayudas... ¿Te lo pasaste bien al menos? Ahora me conoces mas ^^';
            } else {
                performance = 'Supongo que no me conoces tanto como pensaba... ¿Me odias? :c';
            }

            document.getElementById('performanceText').textContent = performance;
        }

        function startQuiz() {
            welcomeScreen.classList.add('hidden');
            quizContainer.style.display = 'block';
            helpButton.style.display = 'flex';
            quizStarted = true;
            displayQuestion();
        }

        submitBtn.addEventListener('click', checkAnswer);

        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        answerInput.addEventListener('input', (e) => {
            e.target.value = validateInput(e.target.value);
        });

        startBtn.addEventListener('click', () => {
            const alreadyTaken = localStorage.getItem("quizTaken") === "yes";
            if (alreadyTaken) {
                /*alert("Ya tomaste el quiz Lily, ¿Querías alterar tus respuestas? Malosa :3");
                return;*/
                welcomeScreen.classList.add('hidden');
                modalAlready.style.display = 'block';
                content.style.display = 'none';
                return;
            } else{
                startQuiz();
            }
            
        });


        helpButton.addEventListener('click', () => {
            const question = questions[currentQuestionIndex];
            hintText.textContent = question.hint;
            modalOverlay.classList.add('active');

            if (hintShown) {
                hintText.classList.add('show');
                modalQuestion.style.display = 'none';
            } else {
                hintText.classList.remove('show');
                modalQuestion.style.display = 'block';
            }
        });

        confirmBtn.addEventListener('click', () => {
            if (!hintShown) {
                hintText.classList.add('show');
                modalQuestion.style.display = 'none';
                helpCount++;
                helpCounter.textContent = helpCount;
                hintShown = true;
            } else {
                modalOverlay.classList.remove('active');
            }
        });


        cancelBtn.addEventListener('click', () => {
            modalOverlay.classList.remove('active');
        });

        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
            }
        });
    </script>
</body>

</html>